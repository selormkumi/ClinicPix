<body>
	<!-- Sidebar -->
	<div class="sidebar">
		<h2>Patient Dashboard</h2>
		<a routerLink="/patient/dashboard">Home</a>
		<a routerLink="/patient/my-records">My Records</a>
		<a routerLink="/patient/uploaded-images">Uploaded Images</a>
		<a routerLink="/patient/profile">Profile</a>
		<a href="#" (click)="logout()">Logout</a>
	</div>

	<!-- Main Content -->
	<div class="main-content">
		<!-- Header -->
		<div class="header">
			<h3>Welcome, {{ currentUserFullName }}</h3>
			<p>Manage your medical images securely and efficiently.</p>
		</div>

		<!-- My Images Section -->
		<div class="card">
			<div class="card-body">
				<h5>My Images</h5>
				<table class="table table-striped">
					<thead>
						<tr>
							<th>Image Name</th>
							<th>Uploaded On</th>
							<th>Tags</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngFor="let record of imageRecords">
							<td>{{ record.name }}</td>
							<td>{{ record.uploadedOn }}</td>
							<td>{{ record.tags }}</td>
							<td>
								<button
									class="btn btn-primary btn-sm"
									(click)="viewImage(record)">
									View</button
								>&nbsp;
								<button
									class="btn btn-secondary btn-sm"
									(click)="shareImage(record)">
									Share
								</button>
								<!-- <button class="btn btn-success btn-sm" (click)="downloadImage(record)">Download</button> -->
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

		<!-- Image Viewer -->
		<div *ngIf="selectedImage" class="modal-overlay">
			<div class="modal-content">
				<span class="close-button" (click)="closeViewer()">&times;</span>
				<img [src]="selectedImage" class="img-fluid" alt="Selected Image" />
			</div>
		</div>

		<!-- Share Link Modal -->
		<div *ngIf="sharedLink" class="modal-overlay">
			<div class="modal-content">
				<h5>Share Image</h5>
				<p>Copy this link and share it. It expires in 10 minutes.</p>
				<input type="text" class="form-control" [value]="sharedLink" readonly />

				<!-- Buttons container -->
				<div class="modal-buttons">
					<button class="btn btn-primary" (click)="copyToClipboard()">
						Copy Link
					</button>
					<button class="btn btn-danger" (click)="closeShareModal()">
						Close
					</button>
				</div>
			</div>
		</div>
	</div>
</body>
