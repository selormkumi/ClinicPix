<!-- Sidebar -->
<div class="sidebar">
	<h2>Provider Dashboard</h2>
	<a routerLink="/provider/dashboard">Home</a>
	<a routerLink="/provider/patients">Patients</a>
	<a routerLink="/provider/uploaded-images">Uploaded Images</a>
	<a routerLink="/provider/shared-images">Shared Images</a>
	<a routerLink="/provider/profile">Profile</a>
	<a href="#" (click)="logout()">Logout</a>
</div>

<!-- Main Content -->
<div class="main-content">
	<!-- Search Input -->
	<div class="search-container">
		<input
			type="text"
			class="form-control"
			placeholder="Search Patients..."
			[(ngModel)]="searchTerm"
			(input)="onSearch()" />
	</div>
	<br />

	<!-- Patients Section -->
	<div id="patients" class="card">
		<div class="card-body">
			<h5>Patients</h5>

			<!-- Add Patient Form -->
			<div class="add-patient-form mb-3 d-flex align-items-center">
				<select
				  class="form-control patient-select mr-2"
				  [(ngModel)]="selectedPatientEmail">
				  <option value="" disabled selected>Select a patient</option>
				  <option *ngFor="let patient of availablePatientEmails" [value]="patient.email">
					{{ patient.username }} ({{ patient.email }})
				  </option>
				</select>
				<button class="btn btn-primary" (click)="assignPatient()">+ Add Patient</button>
			</div>			  

			<table class="table table-striped">
				<thead>
					<tr>
						<th>Username</th>
						<th>Email</th>
						<th>Phone</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let patient of filteredPatients">
						<td>{{ patient.username }}</td>
						<td>{{ patient.email }}</td>
						<td>{{ patient.phone }}</td>
						<td>
							<button class="btn btn-primary btn-sm">View Details</button>&nbsp;
							<button class="btn btn-secondary btn-sm">Send Message</button>&nbsp;
							<button
								class="btn btn-danger btn-sm"
								(click)="removePatient(patient.id)">
								Remove
							</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>
