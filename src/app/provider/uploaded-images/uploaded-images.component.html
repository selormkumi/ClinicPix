<!-- Sidebar -->
<div class="sidebar">
	<h2>Provider Dashboard</h2>
	<a routerLink="/provider/dashboard">Home</a>
	<a routerLink="/provider/patients">Patients</a>
	<a routerLink="/provider/uploaded-images">Uploaded Images</a>
	<a routerLink="/provider/shared-images">Shared Images</a>
	<a routerLink="/provider/profile">Profile</a>
	<a href="#" (click)="logout()">Logout</a>
</div>

<!-- Main Content -->
<div class="main-content">
	<!-- Header -->
	<div class="header">
		<h3>Welcome, {{ currentUserFullName }}</h3>
		<p>Manage your patients and medical image sharing efficiently.</p>
	</div>

	<!-- Uploaded Images Section -->
	<div id="uploaded" class="card">
		<div class="card-body">
			<h5>Uploaded Images</h5>

		<!-- Drag & Drop Zone -->
		<div class="drop-zone" (dragover)="handleDragOver($event)" (dragleave)="handleDragLeave()" (drop)="handleDrop($event)">
			<i class="fas fa-cloud-upload-alt" style="font-size: 40px; color: #007bff;"></i>
			<p *ngIf="!pendingFile"><b>Drag & drop an image file here</b></p>
			<p *ngIf="pendingFile" class="selected-file"><b>Selected: {{ pendingFile.name }}</b></p>
			<button class="btn btn-success" (click)="triggerFileInput()">Select File</button>
			<input type="file" #fileInput (change)="uploadImage($event)" style="display: none;" />
			<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
		</div>


			<!-- Hidden File Input -->
			<input type="file" #fileInput (change)="uploadImage($event)" style="display: none;" />

			<!-- Upload Controls -->
			<div class="upload-controls">
				<input type="text" [(ngModel)]="newFileName" placeholder="Enter file name"/>&nbsp;
				<input type="text" [(ngModel)]="newFileTags" placeholder="Enter tag(s)" />
				<button class="btn btn-primary upload-btn" (click)="confirmUpload()" [disabled]="!pendingFile">Upload</button>
			</div>

			<table class="table table-striped">
				<thead>
					<tr>
						<th>Image Name</th>
						<th>Uploaded By</th>
						<th>Uploaded On</th>
						<th>Tags</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let image of uploadedImages">
						<td>{{ image.name }}</td>
						<td>{{ image.uploadedBy }}</td>
						<td>{{ image.uploadedOn }}</td>
						<td>{{ image.tags.join(", ") }}</td>
						<td>
							<button class="btn btn-primary btn-sm" (click)="viewImage(image.name)">View</button>&nbsp;
							<button class="btn btn-secondary btn-sm" (click)="editImage(image.name)">Edit</button>&nbsp;
							<button class="btn btn-warning btn-sm" (click)="shareImage(image.name)">Share</button>&nbsp;
							<button class="btn btn-danger btn-sm" (click)="deleteImage(image.name)">Delete</button>&nbsp;
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>
