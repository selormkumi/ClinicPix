import{b as C,d as g,f as _,g as M,j as O,l as y,m as I,q as R,s as S,u as k}from"./chunk-WFSOM37F.js";import{b as v,h as P,j as b}from"./chunk-YITIAFLR.js";import{Cb as i,Eb as c,Oa as a,Pa as l,Za as f,cb as m,gc as x,ic as w,jb as d,nb as o,ob as e,pb as u,ub as h,vb as p}from"./chunk-Z3TPZZXO.js";function F(t,s){t&1&&(o(0,"p",13),i(1," Password must be at least 6 characters. "),e())}function G(t,s){if(t&1&&(o(0,"div",14),i(1),e()),t&2){let n=p();a(),c(" ",n.message," ")}}function T(t,s){if(t&1&&(o(0,"div",15),i(1),e()),t&2){let n=p();a(),c(" ",n.error," ")}}var E=class t{constructor(s,n,r,N){this.route=s;this.fb=n;this.http=r;this.router=N;this.form=this.fb.group({newPassword:["",[g.required,g.minLength(6)]]})}form;token="";email="";loading=!1;message="";error="";ngOnInit(){this.token=this.route.snapshot.queryParamMap.get("token")||"",this.email=this.route.snapshot.queryParamMap.get("email")||"",(!this.token||!this.email)&&(this.error="Invalid password reset link.")}submit(){this.form.invalid||!this.token||!this.email||(this.loading=!0,this.http.post("http://localhost:5001/api/auth/reset-password",{email:this.email,token:this.token,newPassword:this.form.value.newPassword}).subscribe({next:()=>{this.message="\u2705 Your password has been reset. You may now log in.",this.loading=!1,setTimeout(()=>this.router.navigate(["/auth/login"]),2500)},error:s=>{this.error=s.error?.message||"Reset failed.",this.loading=!1}}))}static \u0275fac=function(n){return new(n||t)(l(P),l(S),l(v),l(b))};static \u0275cmp=f({type:t,selectors:[["app-reset-password"]],decls:20,vars:5,consts:[[1,"header","text-center"],[1,"container"],[1,"card","login-card"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","newPassword"],["id","newPassword","type","password","formControlName","newPassword","placeholder","Enter your new password","required","",1,"form-control"],["class","error",4,"ngIf"],["type","submit",1,"btn","btn-success","w-100","mt-3",3,"disabled"],["class","alert alert-success mt-3 text-center",4,"ngIf"],["class","alert alert-danger mt-3 text-center",4,"ngIf"],[1,"footer","text-center","mt-4"],[1,"error"],[1,"alert","alert-success","mt-3","text-center"],[1,"alert","alert-danger","mt-3","text-center"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"h1"),i(2,"ClinicPix"),e()(),o(3,"div",1)(4,"div",2)(5,"h2",3),i(6,"Reset Password"),e(),o(7,"form",4),h("ngSubmit",function(){return r.submit()}),o(8,"div",5)(9,"label",6),i(10,"New Password"),e(),u(11,"input",7),m(12,F,2,0,"p",8),e(),o(13,"button",9),i(14," Reset Password "),e()(),m(15,G,2,1,"div",10)(16,T,2,1,"div",11),e()(),o(17,"div",12)(18,"p"),i(19,"\xA9 2025 Secure Medical Image Sharing Platform"),e()()),n&2&&(a(7),d("formGroup",r.form),a(5),d("ngIf",r.form.controls.newPassword.invalid&&r.form.controls.newPassword.touched),a(),d("disabled",r.loading||r.form.invalid),a(2),d("ngIf",r.message),a(),d("ngIf",r.error))},dependencies:[w,x,k,O,C,_,M,R,y,I],styles:["body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,sans-serif;background-color:#f4f4f9}.header[_ngcontent-%COMP%]{background-color:#2c3e50;color:#fff;padding:20px;text-align:center}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 4px 6px #0000001a;width:350px;padding:20px}.card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#2c3e50;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:5px;display:block}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:14px}.password-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.password-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding-right:40px}.toggle-password-icon[_ngcontent-%COMP%]{position:absolute;right:10px;width:20px;height:20px;cursor:pointer}.btn[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;border:none;padding:10px;width:100%;border-radius:5px;cursor:pointer;font-size:16px}.btn[_ngcontent-%COMP%]:hover{background-color:#2980b9}.footer[_ngcontent-%COMP%]{text-align:center;margin-top:20px;font-size:12px;color:#7f8c8d}"]})};export{E as ResetPasswordComponent};
